<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.patient.mapper.DrugInstructionMapper">

    <resultMap type="com.ruoyi.patient.domain.DrugInstruction" id="DrugInstructionResult">
        <id property="id" column="id"/>
        <result property="drugId" column="drug_id"/>
        <result property="content" column="content"/>
        <result property="version" column="version"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <!-- 获取所有说明书 -->
    <select id="getAllDrugInstructions" resultMap="DrugInstructionResult">
        SELECT id, drug_id, content, version, update_time
        FROM gvp_drug_instruction
    </select>

    <!-- 根据说明书ID获取说明书 -->
    <select id="getDrugInstructionById" parameterType="Long" resultMap="DrugInstructionResult">
        SELECT id, drug_id, content, version, update_time
        FROM gvp_drug_instruction
        WHERE id = #{id}
    </select>

    <!-- 根据药品ID获取说明书 -->
    <select id="getDrugInstructionsByDrugId" parameterType="Long" resultMap="DrugInstructionResult">
        SELECT id, drug_id, content, version, update_time
        FROM gvp_drug_instruction
        WHERE drug_id = #{drugId}
    </select>

    <!-- 添加说明书 -->
    <insert id="addDrugInstruction" parameterType="com.ruoyi.patient.domain.DrugInstruction" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO gvp_drug_instruction (drug_id, content, version, update_time)
        VALUES (#{drugId}, #{content}, #{version}, #{updateTime})
    </insert>

    <!-- 更新说明书 -->
    <update id="updateDrugInstruction" parameterType="com.ruoyi.patient.domain.DrugInstruction">
        UPDATE gvp_drug_instruction
        SET drug_id = #{drugId},
            content = #{content},
            version = #{version},
            update_time = #{updateTime}
        WHERE id = #{id}
    </update>

    <!-- 删除说明书 -->
    <delete id="deleteDrugInstruction" parameterType="Long">
        DELETE FROM gvp_drug_instruction WHERE id = #{id}
    </delete>

</mapper>
